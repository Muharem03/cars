@page "/car/{CarId}"
@rendermode InteractiveServer
@inject NavigationManager Navigation

<h3 class="text-center mb-4 fw-bold text-primary">🚗 Car Details</h3>

@if (car != null)
{
    <div class="container shadow-lg p-4 rounded-3 bg-white">
        <div class="row">
            <!-- Car Image -->
            <div class="col-md-6">
                <img src="@car.ImageUrl" class="img-fluid rounded mb-4" alt="@car.Brand @car.Model">
            </div>
            <!-- Car Details -->
            <div class="col-md-6">
                <h4 class="fw-bold">@car.Brand @car.Model (@car.Year)</h4>
                <p><strong>Price:</strong> $@car.Price</p>
                <p><strong>Transmission:</strong> @car.TransmissionType</p>
                <p><strong>Kilometers:</strong> @car.Kilometers km</p>
                <p><strong>Horsepower:</strong> @car.HorsePower HP</p>
                <p><strong>Fuel Type:</strong> @car.FuelType</p>
                <p><strong>Emission Class:</strong> @car.EmissionClass</p>

                <button class="btn btn-primary fw-semibold" @onclick="OnContactDealer">📞 Contact Dealer</button>
                <button class="btn btn-outline-secondary ms-2" @onclick="OnGoBack">⬅️ Back to List</button>
            </div>
        </div>
    </div>
}
else
{
    <p class="text-danger text-center fw-bold">Car details not found.</p>
    <button class="btn btn-outline-secondary" @onclick="OnGoBack">⬅️ Back to List</button>
}

@code {
    [Parameter]
    public string CarId { get; set; }

    private Car car;

    protected override void OnInitialized()
    {
        LoadCarDetails();
    }

    private void LoadCarDetails()
    {
        var allCars = new List<Car>
        {
            new Car { Id = "1", Brand = "Audi", Model = "A4", Year = 2020, Price = 25000, TransmissionType = "Automatic", Kilometers = 15000, HorsePower = 200, FuelType = "Petrol", EmissionClass = "Euro 6", ImageUrl = "https://assets.adac.de/image/upload/v1/Autodatenbank/Fahrzeugbilder/im05969-1-audi-a4-gtron.jpg" },
            new Car { Id = "2", Brand = "BMW", Model = "X3", Year = 2019, Price = 30000, TransmissionType = "Manual", Kilometers = 25000, HorsePower = 250, FuelType = "Diesel", EmissionClass = "Euro 6", ImageUrl = "https://upload.wikimedia.org/wikipedia/commons/c/c2/2018_BMW_X3_xDrive30d_M_Sport_Automatic_3.0_Front.jpg" }
        };

        car = allCars.FirstOrDefault(c => c.Id == CarId);
    }

    private void OnContactDealer()
    {
        Navigation.NavigateTo($"/contact?carId={CarId}");
    }

    private void OnGoBack()
    {
        Navigation.NavigateTo("/cars");
    }

    public class Car
    {
        public string Id { get; set; }
        public string Brand { get; set; }
        public string Model { get; set; }
        public int Year { get; set; }
        public decimal Price { get; set; }
        public string TransmissionType { get; set; }
        public int Kilometers { get; set; }
        public int HorsePower { get; set; }
        public string FuelType { get; set; }
        public string EmissionClass { get; set; }
        public string ImageUrl { get; set; }
    }
}

